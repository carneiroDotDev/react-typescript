(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{14:function(e,t,a){e.exports=a(27)},27:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(9),c=a.n(o),s=a(12),u=a(13),l=a(3),i={episodes:[],favourites:[]},d=r.a.createContext(i);function p(e,t){switch(t.type){case"FETCH_DATA":return Object(l.a)({},e,{episodes:t.payload});case"ADD_FAV":return Object(l.a)({},e,{favourites:[].concat(Object(u.a)(e.favourites),[t.payload])});case"REMOVE_FAV":return Object(l.a)({},e,{favourites:t.payload});default:return e}}a(7);var f=a(2),m=r.a.memo(function(e){var t=r.a.useContext(d).state;return console.log("state -",t),r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:"header"},r.a.createElement("div",null,r.a.createElement("h2",null,"Rick and Morty Episode picker.."),r.a.createElement("p",null," Pick your favourite episode!")),r.a.createElement("div",null,r.a.createElement(f.a,{to:"/"},"Home"),r.a.createElement(f.a,{to:"/faves"},"Number of favourites: ".concat(t.favourites.length)))),e.children)}),v=a(4),E=a.n(v),h=a(11),y=function(){var e=Object(h.a)(E.a.mark(function e(t){var a,n;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.tvmaze.com/singlesearch/shows?q=rick-&-morty&embed=episodes");case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",t({type:"FETCH_DATA",payload:n._embedded.episodes}));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(e,t,a){var n=e.favourites.includes(a);console.log(n);var r={type:"ADD_FAV",payload:a};n&&(r={type:"REMOVE_FAV",payload:e.favourites.filter(function(e){return e.id!==a.id})});return t(r)},g=r.a.lazy(function(){return a.e(0).then(a.bind(null,28))});var A=r.a.lazy(function(){return a.e(0).then(a.bind(null,28))});var k=function(e){return e.pageComponent};c.a.render(r.a.createElement(function(e){var t=e.children,a=r.a.useReducer(p,i),n=Object(s.a)(a,2),o=n[0],c=n[1];return r.a.createElement(d.Provider,{value:{state:o,dispatch:c}},t)},null,r.a.createElement(f.b,null,r.a.createElement(m,{path:""},r.a.createElement(k,{default:!0,pageComponent:r.a.createElement(function(){var e=r.a.useContext(d),t=e.state,a=e.dispatch;r.a.useEffect(function(){0===t.episodes.length&&y(a),console.log("useEffect hook")});var n={episodes:t.episodes,toggleFavAction:b,favourites:t.favourites,store:{state:t,dispatch:a}};return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null," Loadding ... ")},r.a.createElement("section",{className:"episodeLayout"},r.a.createElement(g,n)))},null),path:""}),r.a.createElement(k,{pageComponent:r.a.createElement(function(){var e=r.a.useContext(d),t=e.state,a=e.dispatch,n={episodes:t.favourites,toggleFavAction:b,favourites:t.favourites,store:{state:t,dispatch:a}};return r.a.createElement(r.a.Suspense,{fallback:r.a.createElement("div",null," Loadding ... ")},r.a.createElement("div",{className:"episodeLayout"},r.a.createElement(A,n)))},null),path:"/faves"})))),document.getElementById("root"))},7:function(e,t,a){}},[[14,2,3]]]);
//# sourceMappingURL=main.d92858c0.chunk.js.map